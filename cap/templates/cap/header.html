{# -*- coding: utf-8 -*-
#
# This file is part of CERN Analysis Preservation Framework.
# Copyright (C) 2016 CERN.
#
# CERN Analysis Preservation Framework is free software; you can redistribute
# it and/or modify it under the terms of the GNU General Public License as
# published by the Free Software Foundation; either version 2 of the
# License, or (at your option) any later version.
#
# CERN Analysis Preservation Framework is distributed in the hope that it will
# be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with CERN Analysis Preservation Framework; if not, write to the
# Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston,
# MA 02111-1307, USA.
#
# In applying this license, CERN does not
# waive the privileges and immunities granted to it by virtue of its status
# as an Intergovernmental Organization or submit itself to any jurisdiction.
#}

{%- extends "invenio_theme/header.html" %}

{% block navbar %}
<div class="container-fluid cap-header navbar-fixed-top">
    <div class="pull-left">
        <div ng-if="exp" id="cap-menu-toggle">
          <a id="btn-append-to" class="btn" ng-click="menuToggle();">
            <span class="fa fa-bars"></span>
          </a>
        </div>
        {% block brand %}
        <a class="cap-home-logo" href="/">
            <img src="{{ url_for('static', filename='img/cap_logo_lrg.svg')}}" onerror="this.src={{ url_for('static', filename='img/cap_logo_sm.png')}}; this.src=null;" alt="{{_(config.THEME_SITENAME)}}" height="65px" class="visible-lg-inline-block"/>
            <img src="{{ url_for('static', filename='img/cap_logo_sm.svg')}}" height="65px;" onerror="this.src={{ url_for('static', filename='img/cap_logo_sm.png')}}; this.src=null;" alt="{{_(config.THEME_SITENAME)}}" class="hidden-lg"/>
        </a>
        <img src="{{ url_for('static', filename='img/demo.png') }}" alt="" style="position:absolute;top:0;right:300px;width:100px;pointer-events:none;">
        {% endblock %}
        {% raw %}
        <div ng-if="exp" id="cap-experiments-toggle" class="dropdown" uib-dropdown is-open="status.isopen2">
          <button id="cap-experiments-dropdown" uib-dropdown-toggle ng-disabled="disabled" class="dropdown btn" type="button"  aria-haspopup="true" aria-expanded="false">
            {{exp}}
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu aria-labelledby="cap-experiments-dropdown">
            <li class="header visible-lg-block" ng-repeat="experiment in currentUser.collaborations">
              <a  ng-if="experiment" href="/app/experiment/set/{{experiment}}" target="_self">
                <i class="fa">
                  <img width="20px" height="20px" ng-src="/static/img/{{experiment}}.svg"/>
                </i>
                {{experiment}}
              </a>
            </li>
          </ul>
        </div>
        {% endraw %}
    </div>

    {%- block navbar_search %}
      {%- include "cap/searchbar.html" %}
    {%- endblock navbar_search %}

    {%- block navbar_right %}
    <div id="cap-header-right" ng-show="currentUser" class="col-sm-3 pull-right">
        <div class="row">
            {%- block navbar_new_deposit %}
              {% raw %}
              <div ng-if="exp" id="cap-user-deposit-menu">
                  <a ui-sref="app.select_deposit_new" class="btn" id="header-upload">
                    <i class="fa fa-cloud-upload"></i>
                    Create
                  </a>
              </div>
              {% endraw %}
            {%- endblock navbar_new_deposit %}
            {% raw %}
                <div id="cap-home-user-menu" class="dropdown" uib-dropdown is-open="status.isopen1">
                  <button id="cap-home-user" uib-dropdown-toggle ng-disabled="disabled" class="dropdown btn" type="button"  aria-haspopup="true" aria-expanded="false">
                    <i class="fa fa-user"></i>
                    <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu aria-labelledby="cap-home-user">
                    <li class="header visible-lg-block">
                      <span>Signed In As</br> <strong>{{currentUser.email}}</strong></span>
                    </li>
                    <li role="separator" class="divider visible-lg-block"></li>
                    <li class="">
                      <a href="#">
                        <i class="fa fa-user"></i>
                        Your Profile
                      </a>
                    </li>
                    <li class="">
                      <a href="#">
                        <i class="fa fa-link"></i>
                        Your Settings
                      </a>
                    </li>
                    <li class="">
                      <a href="#">
                        <i class="fa fa-shield"></i>
                        Your Applications
                      </a>
                    </li>
                    <li role="separator" class="divider visible-sm-block visible-xs-block"></li>
                    <li class="visible-sm-block visible-xs-block">
                      <a href="/app/logout" target="_self">
                        <i class="fa fa-power-off"></i>
                        Sign Out
                      </a>
                    </li>
                  </ul>
                  <a href="/app/logout" target="_self" class="btn visible-lg-inline-block visible-md-inline-block"><i class="fa fa-power-off" aria-hidden="true"></i></a>
                </div>
            {% endraw %}
        </div>
    </div>
    {%- endblock navbar_right %}
</div>
{% endblock %}

{%- block breadcrumbs %}{%- endblock %}
